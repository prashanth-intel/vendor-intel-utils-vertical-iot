From a2e4fde249d234804163744c2864975636b88f5b Mon Sep 17 00:00:00 2001
From: "Suresh, Prashanth" <prashanth.suresh@intel.com>
Date: Wed, 15 Jan 2025 17:25:59 +0000
Subject: [PATCH] Upgrade QEMU to 9.1.0

1. Upgrade QEMU to 9.1.0
2. Resolve build errors for QEMU

Signed-off-by: Suresh, Prashanth <prashanth.suresh@intel.com>
---
 scripts/setup_host.sh | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/scripts/setup_host.sh b/scripts/setup_host.sh
index 4e5b74f..b831b60 100755
--- a/scripts/setup_host.sh
+++ b/scripts/setup_host.sh
@@ -9,7 +9,7 @@ set -eE
 
 #---------      Global variable     -------------------
 reboot_required=0
-QEMU_REL="qemu-8.2.1"
+QEMU_REL="qemu-9.1.0"
 skip_install_qemu=false
 
 #Directory to keep versions of qemu which can be reused instead of downloading again
@@ -64,6 +64,13 @@ function ubu_install_qemu_gvt(){
 
     cd $CIV_WORK_DIR/$QEMU_REL/
 
+    if [ -f "$CIV_VERTICAl_DIR/qemu/0031-Set-the-fourcc-if-it-is-0.patch" ]; then
+        mv $CIV_VERTICAl_DIR/qemu/0031-Set-the-fourcc-if-it-is-0.patch $CIV_WORK_DIR/patches/qemu/
+    fi
+    if [ -f "$CIV_VERTICAl_DIR/qemu/0033-CiV-SRIOV-virtio-gpu-power-management-qemu.patch" ]; then
+        mv $CIV_VERTICAl_DIR/qemu/0033-CiV-SRIOV-virtio-gpu-power-management-qemu.patch $CIV_WORK_DIR/patches/qemu/
+    fi
+
     qemu_patch_num=$(ls $CIV_WORK_DIR/patches/qemu/*.patch 2> /dev/null | wc -l)
     if [ "$qemu_patch_num" != "0" ]; then
         for i in $CIV_WORK_DIR/patches/qemu/*.patch; do
-- 
2.34.1

