From 540366f8db6ffaf300d9c50ff45fc3975558bc5e Mon Sep 17 00:00:00 2001
From: "Suresh, Prashanth" <prashanth.suresh@intel.com>
Date: Tue, 5 Nov 2024 22:55:41 +0800
Subject: [PATCH] Fix issue with connectors launch in Android.

Signed-off-by: Suresh, Prashanth <prashanth.suresh@intel.com>
---
 src/guest/vm_builder_qemu.cc | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

diff --git a/src/guest/vm_builder_qemu.cc b/src/guest/vm_builder_qemu.cc
index 5eb6921..9b11b93 100644
--- a/src/guest/vm_builder_qemu.cc
+++ b/src/guest/vm_builder_qemu.cc
@@ -371,14 +371,6 @@ bool VmBuilderQemu::SetupSriov(void) {
 	    return false;
     }
 
-    emul_cmd_.append(connector_str);
-
-    std::string disable_host_input = cfg_.GetValue(kGroupDisplay, kDisableHostInput);
-    if((!disable_host_input.empty()) && disable_host_input.compare("yes") == 0) {
-	LOG(info) << "Disabling host input";
-	emul_cmd_.append("input=off");
-    }
-
     std::string mem_size = cfg_.GetValue(kGroupMem, kMemSize);
     boost::trim(mem_size);
 
@@ -400,7 +392,7 @@ bool VmBuilderQemu::SetupSriov(void) {
     std::string render_sync = cfg_.GetValue(kGroupDisplay, kRenderSync);
     if((!render_sync.empty()) && render_sync.compare("false") == 0) {
         LOG(info) << "render_sync false";
-       render_sync = "false";
+        render_sync = "false";
     }
     else {
         LOG(info) << "render_sync true";
@@ -452,6 +444,14 @@ bool VmBuilderQemu::SetupSriov(void) {
             LOG(error) << "Please enter a valid value for show_fps.";
             return false;
         }
+
+        emul_cmd_.append(connector_str);
+
+        std::string disable_host_input = cfg_.GetValue(kGroupDisplay, kDisableHostInput);
+        if((!disable_host_input.empty()) && disable_host_input.compare("yes") == 0) {
+            LOG(info) << "Disabling host input";
+            emul_cmd_.append("input=off");
+        }
     }
     return true;
 }
-- 
2.43.0

